Http协议学习

Http是超文本传输协议，是客户端与服务器之间通信的协议，基于请求响应的模式。

Http协议是无状态的协议：对于事务处理没有记忆能力。每次请求-响应都是独立的。

Http协议的请求协议

请求报文结构

```
请求行
请求头部
空行
请求体
```

请求行格式

<方法> <请求路径> <协议版本>

请求头部格式

key: value

| 头字段            | 作用说明                                  |
| ----------------- | ----------------------------------------- |
| `Host`            | 目标主机名（必须）域名[:端口]服务器域名   |
| `User-Agent`      | 客户端标识（浏览器/爬虫等）               |
| `Accept`          | 接收的资源类型（如 `text/html`）          |
| `Accept-Encoding` | 支持的压缩方式（如 gzip）                 |
| `Accept-Language` | 支持的语言                                |
| `Content-Type`    | 请求体的数据类型（如 `application/json`） |
| `Content-Length`  | 请求体长度（字节）                        |
| `Authorization`   | 身份验证信息                              |
| `Cookie`          | 附带的 Cookie 数据                        |
| `Referer`         | 来源页面地址                              |
| `Connection`      | 是否保持长连接（如 `keep-alive`）         |

请求体

| 方法   | 是否有请求体 | 用途                     |
| ------ | ------------ | ------------------------ |
| GET    | ❌            | 查询资源，无请求体       |
| POST   | ✅            | 提交数据（如表单、JSON） |
| PUT    | ✅            | 更新资源数据             |
| DELETE | 可选         | 某些实现允许有请求体     |

响应报文的格式

```
状态行
响应头部
空行
响应体
```

状态行格式

HTTP/1.1 <状态码> <状态描述>

响应头部：key: value

| 头部字段         | 作用                                               |
| ---------------- | -------------------------------------------------- |
| `Content-Type`   | 返回内容类型（如 `text/html`、`application/json`） |
| `Content-Length` | 返回内容长度（字节数）                             |
| `Date`           | 响应时间                                           |
| `Server`         | 服务器软件信息                                     |
| `Set-Cookie`     | 设置 Cookie                                        |
| `Cache-Control`  | 缓存策略                                           |
| `Location`       | 重定向地址（3xx 状态码时）                         |
| `Connection`     | 连接管理（如 `keep-alive`）                        |

响应体

包含服务器返回给客户端的资源内容，比如HTML页面，JSON数据，图片，文件等。